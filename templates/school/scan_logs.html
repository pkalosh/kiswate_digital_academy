<!-- templates/school/scan_logs.html -->
{% extends 'school/base.html' %}
{% load static %}
{% block title %}Scan Logs | {{ school.name }}{% endblock %}
{% block content %}
<div class="container mt-4">
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h3 class="fw-bold">ðŸ“‹ Scan Logs</h3>
    
  </div>

  {% if logs %}
    <div class="table-responsive shadow-sm rounded">
      <table class="table table-hover align-middle">
        <thead class="table-light">
                <tr>
        <th>#</th>
        <th>User</th>
        <th>School</th>
        <th>Smart Card ID</th>
        <th>Location</th>
        <th>Device</th>
        <th>Scan Time</th>
      </tr>
        </thead>
        <tbody>
          {% for log in logs %}
            <tr>
        <td>{{ forloop.counter }}</td>
        <td>{{ log.smart_id.profile.get_full_name }}</td>
        <td>{{ log.smart_id.school.name }}</td>
        <td>{{ log.smart_id.card_id }}</td>
        <td>{{ log.location }}</td>
        <td>{{ log.device_id }}</td>
        <td>{{ log.scanned_at|date:"Y-m-d H:i:s" }}</td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>

    <!-- Pagination -->
    <nav aria-label="Page navigation" class="mt-3">
      <ul class="pagination justify-content-center">
        {% if logs.has_previous %}
          <li class="page-item">
            <a class="page-link" href="?page={{ logs.previous_page_number }}&q={{ search }}">Previous</a>
          </li>
        {% else %}
          <li class="page-item disabled"><span class="page-link">Previous</span></li>
        {% endif %}

        <li class="page-item active"><span class="page-link">{{ logs.number }}</span></li>

        {% if logs.has_next %}
          <li class="page-item">
            <a class="page-link" href="?page={{ logs.next_page_number }}&q={{ search }}">Next</a>
          </li>
        {% else %}
          <li class="page-item disabled"><span class="page-link">Next</span></li>
        {% endif %}
      </ul>
    </nav>

  {% else %}
    <div class="alert alert-info">No scan logs found.</div>
  {% endif %}
</div>
{% endblock %}
