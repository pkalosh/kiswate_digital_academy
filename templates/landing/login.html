<!-- LOGIN SECTION -->
{% extends 'landing/base.html' %}
{% block title %}Login | Kiswate Digital Learning App{% endblock %}

{% block content %}
{% if messages %}
<div aria-live="polite" aria-atomic="true" class="position-fixed bottom-0 end-0 p-3" style="z-index: 1100;">
    <div class="toast-container d-flex flex-column gap-2">
        {% for message in messages %}
        <div class="toast bg-{{ message.tags }} text-white border-0" role="alert" aria-live="assertive" aria-atomic="true">
            <div class="d-flex">
                <div class="toast-body d-flex align-items-center gap-3">
                    <!-- Icon based on tag -->
                    {% if 'success' in message.tags %}
                    <i class="bi bi-check-circle-fill fs-4"></i>
                    {% elif 'error' in message.tags or 'danger' in message.tags %}
                    <i class="bi bi-exclamation-triangle-fill fs-4"></i>
                    {% elif 'warning' in message.tags %}
                    <i class="bi bi-exclamation-circle-fill fs-4"></i>
                    {% else %}
                    <i class="bi bi-info-circle-fill fs-4"></i>
                    {% endif %}
                    <span>{{ message }}</span>
                </div>
                <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button>
            </div>
        </div>
        {% endfor %}
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        document.querySelectorAll('.toast').forEach(el => {
            new bootstrap.Toast(el, {
                autohide: true,
                delay: 4500
            }).show();
        });
    });
</script>
{% endif %}

<section id="login" style="padding:80px 0; background-color:#0d1117;">
  <div class="container">
    <div class="row justify-content-center">
      <div class="col-md-8 col-lg-6" data-aos="fade-up">
        <div class="text-center mb-4">
          <h2 class="section-title text-light">Welcome Back to Kiswate Digital</h2>
          <p class="section-sub text-secondary">Sign in to access your school portal on the cloud.</p>
          <div class="divider mx-auto my-3" style="width:80px; height:2px; background-color:#28a745;"></div>
        </div>

        <form method="post" action="" class="row g-3 p-4 rounded-4 shadow" style="background-color:#1a1f2b;">
          {% csrf_token %}
          <div class="col-12">
            <label class="form-label text-light">Email Address</label>
            <input 
              type="email" 
              name="email" 
              class="form-control bg-light text-dark border-0 rounded-3 py-2" 
              placeholder="you@example.com" 
              required 
            />
          </div>

          <div class="col-12">
            <label class="form-label text-light">Password</label>
            <div class="input-group">
              <input 
                type="password" 
                name="password" 
                id="password" 
                class="form-control bg-light text-dark border-0 rounded-start-3 py-2" 
                placeholder="Enter password" 
                required 
              />
              <button type="button" class="btn btn-outline-secondary rounded-end-3" id="togglePassword">Show</button>
            </div>
          </div>

          <div class="col-12 d-flex justify-content-between align-items-center mt-2">
            <a href="" class="text-secondary small">Forgot password?</a>
            <button type="submit" class="btn cta-btn btn-green px-4 py-2">Login</button>
          </div>
        </form>

      </div>
    </div>
  </div>
</section>

<script>
  const togglePassword = document.querySelector('#togglePassword');
  const password = document.querySelector('#password');
  togglePassword.addEventListener('click', () => {
    const type = password.getAttribute('type') === 'password' ? 'text' : 'password';
    password.setAttribute('type', type);
    togglePassword.textContent = type === 'password' ? 'Show' : 'Hide';
  });
</script>
{% endblock %}
<!--  -->